<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}">

<head>
	<title>Portfolio</title>
</head>

<body>
	<div class="topics-new-wrapper" layout:fragment="contents">
		<div class="container">
			<div class="row">
				<main class="col-md-5 mx-auto">
					<h1 class="text-center">作物画像登録</h1>
					<h3>作物情報</h3>
					<div th:if="${crop}">
						<table class="table">
							<thead>
							</thead>
							<tbody>
								<tr>
									<th scope="row">作物名</th>
									<td　th:text="${crop.name}"></td>
								</tr>
								<tr>
									<th scope="row">種まき可能期間</th>
									<td>
										<div style="display: flex; align-items: center;">
											<div th:text="${crop.sowing_start}"></div>
											<div>　～　</div>
											<div th:text="${crop.sowing_end}"></div>
										</div>
									</td>
								</tr>
								<tr>
									<th scope="row">栽培日数</th>
									<td>
										<div style="display: flex; align-items: center;">
											<div th:text="${crop.cultivationp_period}"></div>
											<div>　日　</div>
										</div>
									</td>
								</tr>
								<tr>
									<th scope="row">育て方メモ</th>
									<td　th:text="${crop.manual}">
								</tr>
							</tbody>
						</table>
						<br><br>
						<!-- 画像がアップロードされたらトップ画像をここに表示 -->
						<div th:if="${#lists.size(list) > 0}" th:each="image: ${list}">
							<div class="d-inline-block">
								<div th:if="${image.topImage}">
									<img th:src="${image.path}" alt="Image" style="width: 150px; height: 150px;">
									<span th:text="${image.path}"></span>
									<a th:href="@{/crops/delete-image(imageId=${image.id}, cropId=${crop.id})}">
										削除する
									</a>
								</div>
							</div>
						</div>
						<br><br>
						<h3>・作物トップ画像アップロード</h3>
						<!-- トップ画像をアップロードするフォーム -->
						<form method="post" th:action="@{/crops/upload-TopImage}" th:object="${cropTopImageform}"
							enctype="multipart/form-data">
							<div layout:replace="~{layouts/common::messages}"></div>
							<label>Image</label>
							<input type="hidden" th:field="*{cropId}" />
							<div class="form-group">
								<input type="file" class="form-control-file" id="file" name="file" th:field="*{image}" />
							</div>
							<p th:if="${imageError}" class="error-message" th:text="${imageError}"></p>
							<button type="submit"> トップ画像をアップロードする</button>
						</form>
						<br><br>
						<!-- 画像がアップロードされたらトップ画像以外の画像をここに表示 -->
						<div th:if="${#lists.size(list) > 0}" th:each="image: ${list}">
							<div class="d-inline-block">
								<div th:if="${!image.topImage}">
									<img th:src="${image.path}" alt="Image" style="width: 150px; height: 150px;">
									<span th:text="${image.path}"></span>
									<a th:href="@{/crops/delete-image(imageId=${image.id}, cropId=${crop.id})}">
										削除する
									</a>
								</div>
							</div>
						</div>
						<br><br>
						<h3>・作物その他画像アップロード</h3>
						<!-- 画像をアップロードするフォーム -->
						<form method="post" th:action="@{/crops/upload-image}" th:object="${cropImageform}"
							enctype="multipart/form-data">
							<div layout:replace="~{layouts/common::messages}"></div>
							<label>Image</label>
							<input type="hidden" th:field="*{cropId}" />
							<div class="form-group">
								<input type="file" class="form-control-file" id="file" name="file" th:field="*{image}" />
							</div>
							<p th:if="${imageError}" class="error-message" th:text="${imageError}"></p>
							<button type="submit">画像をアップロードする</button>
						</form>
						<a class="btn w-100 btn-success" th:href="@{'/crops/detail/' + ${crop.Id}}" role="button">登録する</a>
				</main>
			</div>
		</div>
	</div>
</body>

</html>